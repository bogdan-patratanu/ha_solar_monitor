metadata:
  manufacturer: "Growatt"
  model: "Single Phase"
  description: "Growatt single phase hybrid inverter"
  supported_models:
    - "SPH 3000-6000"
    - "MIN 2500-6000TL-X"

communication:
  default_port: 502
  default_modbus_id: 1
  default_timeout: 10
  default_batch_size: 60
  driver: "pymodbus"

# Growatt has different register addresses
sensors:
  # PV sensors
  pv_voltage:
    address: 3
    data_type: uint16
    name: "PV1 Voltage"
    unit: "V"
    factor: 0.1
    icon: "mdi:solar-panel"
    device_class: "voltage"
    state_class: "measurement"
  
  pv_current:
    address: 4
    data_type: uint16
    name: "PV1 Current"
    unit: "A"
    factor: 0.1
    icon: "mdi:current-dc"
    device_class: "current"
    state_class: "measurement"
  
  pv_power:
    address: 5
    data_type: uint16
    name: "PV1 Power"
    unit: "W"
    factor: 0.1
    icon: "mdi:solar-power"
    device_class: "power"
    state_class: "measurement"
  
  pv2_voltage:
    address: 7
    data_type: uint16
    name: "PV2 Voltage"
    unit: "V"
    factor: 0.1
    icon: "mdi:solar-panel"
    device_class: "voltage"
    state_class: "measurement"
  
  pv2_current:
    address: 8
    data_type: uint16
    name: "PV2 Current"
    unit: "A"
    factor: 0.1
    icon: "mdi:current-dc"
    device_class: "current"
    state_class: "measurement"
  
  pv2_power:
    address: 9
    data_type: uint16
    name: "PV2 Power"
    unit: "W"
    factor: 0.1
    icon: "mdi:solar-power"
    device_class: "power"
    state_class: "measurement"

  # Battery sensors
  battery_voltage:
    address: 13
    data_type: uint16
    name: "Battery Voltage"
    unit: "V"
    factor: 0.1
    icon: "mdi:battery"
    device_class: "voltage"
    state_class: "measurement"
  
  battery_soc:
    address: 14
    data_type: uint16
    name: "Battery SOC"
    unit: "%"
    factor: 1
    icon: "mdi:battery"
    device_class: "battery"
    state_class: "measurement"
  
  battery_power:
    address: 1009
    data_type: uint16
    name: "Battery Power"
    unit: "W"
    factor: 1
    icon: "mdi:battery-charging"
    device_class: "power"
    state_class: "measurement"
  
  battery_current:
    address: 1011
    data_type: uint16
    name: "Battery Current"
    unit: "A"
    factor: 0.1
    icon: "mdi:current-dc"
    device_class: "current"
    state_class: "measurement"

  # Grid sensors
  grid_voltage:
    address: 38
    data_type: uint16
    name: "Grid Voltage"
    unit: "V"
    factor: 0.1
    icon: "mdi:transmission-tower"
    device_class: "voltage"
    state_class: "measurement"
  
  grid_frequency:
    address: 37
    data_type: uint16
    name: "Grid Frequency"
    unit: "Hz"
    factor: 0.01
    icon: "mdi:sine-wave"
    state_class: "measurement"
  
  grid_power:
    address: 1021
    data_type: uint16
    name: "Grid Power"
    unit: "W"
    factor: 1
    icon: "mdi:transmission-tower"
    device_class: "power"
    state_class: "measurement"

  # Load sensors
  load_power:
    address: 1037
    data_type: uint16
    name: "Load Power"
    unit: "W"
    factor: 1
    icon: "mdi:home-lightning-bolt"
    device_class: "power"
    state_class: "measurement"

  # Inverter output
  inverter_power:
    address: 1029
    data_type: uint16
    name: "Inverter Power"
    unit: "W"
    factor: 1
    icon: "mdi:power-plug"
    device_class: "power"
    state_class: "measurement"

  # Energy sensors
  daily_energy:
    address: 53
    data_type: uint16
    name: "Today Generation"
    unit: "kWh"
    factor: 0.1
    icon: "mdi:solar-power"
    device_class: "energy"
    state_class: "total_increasing"
  
  total_energy:
    address: [55, 56]
    data_type: uint32
    name: "Total Generation"
    unit: "kWh"
    factor: 0.1
    icon: "mdi:solar-power"
    device_class: "energy"
    state_class: "total_increasing"

  # Temperature
  temperature:
    address: 93
    data_type: uint16
    name: "Inverter Temperature"
    unit: "Â°C"
    factor: 0.1
    icon: "mdi:thermometer"
    device_class: "temperature"
    state_class: "measurement"
